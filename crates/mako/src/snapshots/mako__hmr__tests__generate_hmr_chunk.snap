---
source: crates/mako/src/hmr.rs
expression: js_code.trim()
---
"globalThis.makoModuleHotUpdate('./index.ts', {\n    modules: {\n        /*./bar_1.ts*/ \"./bar_1.ts\": function(module, exports, require) {\n            \"use strict\";\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n            require(/*./foo*/ \"./foo.ts\");\n        },\n        /*./bar_2.ts*/ \"./bar_2.ts\": function(module, exports, require) {\n            \"use strict\";\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n            require(/*./foo*/ \"./foo.ts\");\n        },\n        /*./foo.ts*/ \"./foo.ts\": function(module, exports, require) {\n            \"use strict\";\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n            Object.defineProperty(exports, \"default\", {\n                enumerable: true,\n                get: function() {\n                    return _default;\n                }\n            });\n            var _default = 1;\n        },\n        /*./index.ts*/ \"./index.ts\": function(module, exports, require) {\n            const RefreshRuntime = require(/*react-refresh*/ \"../../../../../node_modules/.pnpm/react-refresh@0.14.0/node_modules/react-refresh/runtime.js\");\n            RefreshRuntime.injectIntoGlobalHook(window);\n            window.$RefreshReg$ = ()=>{};\n            window.$RefreshSig$ = ()=>(type)=>type;\n            \"use strict\";\n            Object.defineProperty(exports, \"__esModule\", {\n                value: true\n            });\n            var _interop_require_wildcard = require(\"../../../../../node_modules/.pnpm/@swc+helpers@0.5.1/node_modules/@swc/helpers/esm/_interop_require_wildcard.js\");\n            require(/*react-refresh*/ \"../../../../../node_modules/.pnpm/react-refresh@0.14.0/node_modules/react-refresh/runtime.js\");\n            require(/*./bar_1*/ \"./bar_1.ts\");\n            require(/*./bar_2*/ \"./bar_2.ts\");\n            require(/*hoo*/ \"./hoo\");\n            var _reacterroroverlay = _interop_require_wildcard._(require(/*react-error-overlay*/ \"../../../../../node_modules/.pnpm/react-error-overlay@6.0.0/node_modules/react-error-overlay/lib/index.js\"));\n            (function() {\n                let hadRuntimeError = false;\n                const enableErrorOverlay = true;\n                enableErrorOverlay && _reacterroroverlay.startReportingRuntimeErrors({\n                    onError: function() {\n                        hadRuntimeError = true;\n                    }\n                });\n                if (module.hot && typeof module.hot.dispose === 'function') {\n                    module.hot.dispose(function() {\n                        enableErrorOverlay && _reacterroroverlay.stopReportingRuntimeErrors();\n                    });\n                }\n                const socket = new WebSocket('ws://127.0.0.1:3000/__/hmr-ws');\n                let latestHash = '';\n                let updating = false;\n                function runHotUpdate() {\n                    if (hadRuntimeError) {\n                        location.reload();\n                    }\n                    if (latestHash !== require.currentHash()) {\n                        updating = true;\n                        return module.hot.check().then(()=>{\n                            updating = false;\n                            return runHotUpdate();\n                        }).catch((e)=>{\n                            console.error('[HMR] HMR check failed', e);\n                        });\n                    } else {\n                        return Promise.resolve();\n                    }\n                }\n                socket.addEventListener('message', (rawMessage)=>{\n                    const msg = JSON.parse(rawMessage.data);\n                    latestHash = msg.hash;\n                    if (!updating) {\n                        runHotUpdate();\n                    }\n                });\n            })();\n        },\n        /*./hoo*/ \"./hoo\": function(module, exports, require) {\n            \"use strict\";\n            module.exports = hoo;\n        }\n    }\n}, function(runtime) {\n    runtime._h = '42';\n    ;\n});\n\n//# sourceMappingURL=index.js.map"
