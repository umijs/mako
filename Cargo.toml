[workspace]
members = [
  "crates/bundler",
  "crates/cli",
  # Waiting https://github.com/denoland/deno_ast/pull/297 to be resolved
  # "crates/runtime",
]
resolver = "2"

[workspace.package]
edition = "2021"
license = "MIT"

[workspace.dependencies]
utoo_runtime = { version = "0.0.1", path = "./crates/runtime" }
tokio = { version = "1.43.0", features = ["full"] }
anyhow = "1.0.96"
tracing = "0.1.41"
tracing-subscriber = "0.3.19"
console-subscriber = "0.4.1"
rustc-hash = "2.1.1"
clap = { version = "4.5.32", features = ["derive"] }
serde = { version = "1.0.219", features = ["derive"] }
serde_json = "1.0"
owo-colors = "4.2.0"
dunce = "1.0.5"
webbrowser = "1.0.4"
regex = "1.11.1"
criterion = "0.5.1"
async-trait = "0.1.88"
swc_core = { version = "16.4.0", features = [
  "ecma_loader_lru",
  "ecma_loader_parking_lot",
] }

# Dependencies from nextjs, should keep the same rev!
## Dependencies for common cache and task. See https://github.com/vercel/next.js/blob/canary/turbopack/crates/turbopack/architecture.md
turbo-tasks = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks", tag = "v15.2.3" }
turbo-tasks-fs = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-fs", tag = "v15.2.3" }
turbo-tasks-env = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-env", tag = "v15.2.3" }
turbo-tasks-backend = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-backend", tag = "v15.2.3" }
turbo-tasks-build = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-build", tag = "v15.2.3" }
turbo-rcstr = { git = "https://github.com/vercel/next.js.git", package = "turbo-rcstr", tag = "v15.2.3" }
turbo-tasks-memory = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-memory", tag = "v15.2.3" }
turbo-tasks-malloc = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-malloc", tag = "v15.2.3" }
turbopack-trace-utils = { git = "https://github.com/vercel/next.js.git", package = "turbopack-trace-utils", tag = "v15.2.3" }

### Dependencies for bundler specially.
turbopack = { git = "https://github.com/vercel/next.js.git", package = "turbopack", tag = "v15.2.3" }
turbopack-browser = { git = "https://github.com/vercel/next.js.git", package = "turbopack-browser", tag = "v15.2.3" }
turbopack-core = { git = "https://github.com/vercel/next.js.git", package = "turbopack-core", tag = "v15.2.3" }
turbopack-resolve = { git = "https://github.com/vercel/next.js.git", package = "turbopack-resolve", tag = "v15.2.3" }
turbopack-ecmascript = { git = "https://github.com/vercel/next.js.git", package = "turbopack-ecmascript", tag = "v15.2.3" }
turbopack-ecmascript-plugins = { git = "https://github.com/vercel/next.js.git", package = "turbopack-ecmascript-plugins", tag = "v15.2.3" }
turbopack-ecmascript-runtime = { git = "https://github.com/vercel/next.js.git", package = "turbopack-ecmascript-runtime", tag = "v15.2.3" }
turbopack-image = { git = "https://github.com/vercel/next.js.git", package = "turbopack-image", tag = "v15.2.3" }
turbopack-node = { git = "https://github.com/vercel/next.js.git", package = "turbopack-node", tag = "v15.2.3" }
turbopack-nodejs = { git = "https://github.com/vercel/next.js.git", package = "turbopack-nodejs", tag = "v15.2.3" }
turbopack-static = { git = "https://github.com/vercel/next.js.git", package = "turbopack-static", tag = "v15.2.3" }
turbopack-dev-server = { git = "https://github.com/vercel/next.js.git", package = "turbopack-dev-server", tag = "v15.2.3" }

[workspace.lints.clippy]
too_many_arguments = "allow"
