[workspace]
members = [
  "crates/bundler",
  # Waiting https://github.com/denoland/deno_ast/pull/297 to be resolved
  # "crates/runtime", 
  # "crates/cli" 
]
resolver = "2"

[workspace.package]
edition = "2021"
license = "MIT"

[workspace.dependencies]
utoo_runtime = { version = "0.0.1", path = "./crates/runtime" }
tokio = { version = "1.43.0", features = ["full"] }
anyhow = "1.0.96"
tracing = "0.1.41"
tracing-subscriber = "0.3.19"
console-subscriber = "0.4.1"
rustc-hash = "2.1.1"
clap = { version = "4.5.32", features = ["derive"] }
serde = { version = "1.0.219", features = ["derive"] }
owo-colors = "4.2.0"
dunce = "1.0.5"
webbrowser = "1.0.4"
regex = "1.10.6"
criterion = "0.5.1"

# Dependencies from nextjs, should keep the same rev!
## Dependencies for common cache and task. See https://github.com/vercel/next.js/blob/canary/turbopack/crates/turbopack/architecture.md
turbo-tasks = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks", rev = "22812d4" }
turbo-tasks-fs = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-fs", rev = "22812d4" }
turbo-tasks-env = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-env", rev = "22812d4" }
turbo-tasks-backend = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-backend", rev = "22812d4" }
turbo-tasks-build = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-build", rev = "22812d4" }
turbo-rcstr = { git = "https://github.com/vercel/next.js.git", package = "turbo-rcstr", rev = "22812d4" }
turbo-tasks-memory = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-memory", rev = "22812d4" }
turbo-tasks-malloc = { git = "https://github.com/vercel/next.js.git", package = "turbo-tasks-malloc", rev = "22812d4" }
turbopack-trace-utils = { git = "https://github.com/vercel/next.js.git", package = "turbopack-trace-utils", rev = "22812d4" }

### Dependencies for bundler specially.
turbopack = { git = "https://github.com/vercel/next.js.git", package = "turbopack", rev = "22812d4" }
turbopack-browser = { git = "https://github.com/vercel/next.js.git", package = "turbopack-browser", rev = "22812d4" }
turbopack-core = { git = "https://github.com/vercel/next.js.git", package = "turbopack-core", rev = "22812d4" }
turbopack-resolve = { git = "https://github.com/vercel/next.js.git", package = "turbopack-resolve", rev = "22812d4" }
turbopack-ecmascript = { git = "https://github.com/vercel/next.js.git", package = "turbopack-ecmascript", rev = "22812d4" }
turbopack-ecmascript-plugins = { git = "https://github.com/vercel/next.js.git", package = "turbopack-ecmascript-plugins", rev = "22812d4" }
turbopack-ecmascript-runtime = { git = "https://github.com/vercel/next.js.git", package = "turbopack-ecmascript-runtime", rev = "22812d4" }
turbopack-image = { git = "https://github.com/vercel/next.js.git", package = "turbopack-image", rev = "22812d4" }
turbopack-node = { git = "https://github.com/vercel/next.js.git", package = "turbopack-node", rev = "22812d4" }
turbopack-nodejs = { git = "https://github.com/vercel/next.js.git", package = "turbopack-nodejs", rev = "22812d4" }
turbopack-static = { git = "https://github.com/vercel/next.js.git", package = "turbopack-static", rev = "22812d4" }
turbopack-dev-server = { git = "https://github.com/vercel/next.js.git", package = "turbopack-dev-server", rev = "22812d4" }
turbopack-bench = { git = "https://github.com/vercel/next.js.git", package = "turbopack-bench", rev = "22812d4" }

[workspace.lints.clippy]
too_many_arguments = "allow"
